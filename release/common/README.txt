                      MASTodon v0.3 2012
                 Common subtree finding tool
                              by
                        Justs Zarins

                    University of Edinburgh
                     justs.zarins@gmail.com

UNIX / Mac OS X / Linux / Windows README 
15 August 2012

Contents:
1) INTRODUCTION
2) INSTALLING AND RUNNING MASTODON
3) PRUNING TREES
4) VERSION HISTORY
5) SUPPORT & LINKS
6) ACKNOWLEDGMENTS

___________________________________________________________________________
1) INTRODUCTION

MASTodon is a tool for finding common subtrees in a large set of phylogenetic trees, for example ones generated by MCMC. Subtrees are looked for by pruning different taxa from all trees and then evaluating the resulting MAP (Maximum A-posteriori Probability) score. 

___________________________________________________________________________
2) INSTALLING AND RUNNING MASTODON

Mac OS X: To install MASTodon, simply drag the program file to where you normally put applications. Then double click to run.

Windows: To install MASTodon, simply drag the program file to where you normally put applications. Then double click to run.

Linux / UNIX: Copy or move the folder to where you normally put applications and then double click the "mastodon.jar" file (in the lib/ directory) to run or type "./mastodon" at the command-line. 

___________________________________________________________________________
3) PRUNING TREES

~There are tooltips inside the application to guide you!~

1. Open Mastadon.
2. Do File>Import trees and select your tree data.
3. Follow instructions to set burn-in and rooting on an outgroup, if required.
*The data will be loaded with progress displayed on the bottom left corner. 
*After the data is loaded, an info popup will appear with statistics about the data set.

4. Click the Run button below the top left table to run a pruning algorithm.
*You will presented with a range of options to set up an algorithm:

-Search method: how the number of taxa to prune is chosen. 
--Constant: only prune the specified number of taxa.
--Linear: explore pruning between the min and max specified number.
--Bisection: starting at the middle, move in half jumps to find a pruning number that reaches the desired MAP score.
--Flip-Penalty: currently experimental. Looks for a balance between MAP score and number of pruned taxa by randomly pruning and un-pruning taxa.
 
-Algorithm: what optimising algorithm is used at each step.
--Simulated Annealing: specify initial and final temperature. Cooling schedule is exponential between the two temperatures.
--Metropolis Hastings: a higher weighing power makes the algorithm less likely to accept MAP score decreasing moves. 

-Overall options:
--Total iterations: maximum number of pruning combinations to try.
--Desired MAP score: minimum score the algorithms try to achieve.
--Number of repeats: how many times to repeat the algorithm. After finishing, the pruning that produced at least the desired MAP score but with least pruned taxa is displayed.
*A progress bar is shown at the bottom left. Below it is a box displaying some information about the current pruning status. 

And that's about it. Run some algorithms, adjust the proposed pruning manually (all manual pruning can be undone), adjust display options, have a look at clade probabilities from the ÒNodesÓ menu on the bottom right.
The commit button allows you to removed pruned branches from the display. No data is lost by pressing ÒcommitÓ.
You can save and load pruning runs although pruning frequency isn't being stored at the moment. Note that you must first import the same trees you used before in order to load the pruning runs!

You can export the tree view through File>Export Graphic to various formats.

A PDF manual explaining the visual elements can be found at https://github.com/justsz/Mastodon/downloads

___________________________________________________________________________
4) VERSION HISTORY

---Version 0.3 9 August 2012---
* Menus have been cleaned up and there are open/save options.

---Version 0.2 8 August 2012---
* First released beta version

___________________________________________________________________________
5) SUPPORT & LINKS

Project wiki (with implementation details):
http://informatics.nescent.org/wiki/PhyloSoC:_Summary_and_visualization_of_phylogenetic_tree_sets

Source:
https://github.com/justsz/Mastodon

Downloads:
https://github.com/justsz/Mastodon/downloads


Please email me to discuss any problems:
justs.zarins@gmail.com

___________________________________________________________________________
6) ACKNOWLEDGMENTS

Thanks to the following for supplying code or assisting with the creation or testing of MASTodon:

	Andrew Rambaut - primary supervisor
	Karen Cranston - NESCent co-mentor
	Benjamin Redelings - NESCent co-mentor
